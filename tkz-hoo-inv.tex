\begin{tikzpicture}[]
  \begin{scope}[shift={(0, 0)}]
    \tkzputtext{2.0, -0.4}{(a) Concrete state}
    % obj. 1
    \tkzputlftform{0., 1.85}{\varsrc}
    \fill[fill=mlightgreen] (-0.1, 1.2) rectangle (1.1, 2.0);
    \fill[fill=mlightred] (-0.1, 0.8) rectangle (1.1, 1.2);
    \fill[fill=mlightyellow] (-0.1, 0.0) rectangle (1.1, 0.8);
    \draw (-0.1, 0) rectangle (1.1, 2.0);
    \foreach \y in {1, ..., 4}{
      \draw (-0.1, 0.4*\y) -- (1.1, 0.4*\y);
    }
    \foreach \y/\name in {4/a, 3/b, 2/x, 1/u, 0/v}{
      \tkzputform{0.5, 0.2 + 0.4*\y}{\mathtt{\name} \mapsto \ldots}
    }
    % obj. 2
    \tkzputlftform{2.2,1.85}{\vardst}
    \fill[fill=mlightgreen] (2.1, 1.2) rectangle (3.3, 2.0);
    \fill[fill=mlightblue]  (2.1, 1.2) rectangle (3.3, 0.8);
    \draw (2.1,0.8) rectangle (3.3, 2.0);
    \foreach \y in {3, ..., 4}{
      \draw (2.1, 0.4*\y) -- (3.3, 0.4*\y);
    }
    \foreach \y/\name in {4/a, 3/b, 2/d}{
      \tkzputform{2.7, 0.2 + 0.4*\y}{\mathtt{\name} \mapsto \ldots}
    }
    % set valuation
    \tkzputrghform{1.4, 0.35}{
      \begin{array}{l}
        X_v = \{ \mathtt{a}, \mathtt{b} \}
        \; X_r = \{ \mathtt{d} \}
        \\
        X_n = \{ \mathtt{u}, \mathtt{v} \}
        \\
      \end{array}}
  \end{scope}
  \begin{scope}[shift={(6.5,0)}]
    \tkzputtext{3.5, -0.4}{(b) Abstract state}
    % obj. 1
    \tkzputlftform{0., 1.85}{\varsrc}
    \fill[fill=mlightgreen,rounded corners=2pt](-0.1, 1.2) rectangle (1.1, 2.0);
    \fill[fill=mlightgreen] (-0.1, 1.2) rectangle (1.1, 1.5);
    \fill[fill=mlightred] (-0.1, 0.8) rectangle (1.1, 1.2);
    \fill[fill=mlightyellow] (-0.1, 0.5) rectangle (1.1, 0.8);
    \fill[fill=mlightyellow,rounded corners=2pt](-0.1, 0.0)rectangle (1.1, 0.8);
    \draw[rounded corners=2pt] (-0.1, 0) rectangle (1.1, 2.0);
    \draw (-0.1, 1.2) -- (1.1, 1.2);
    \draw (-0.1, 0.8) -- (1.1, 0.8);
    \tkzputform{0.5, 1.6}{X_v}
    \tkzputform{0.5, 1.0}{\{ \texttt{x} \}}
    \tkzputform{0.5, 0.4}{X_n}
    % obj. 2
    \tkzputlftform{2.2,1.85}{\vardst}
    \fill[fill=mlightgreen,rounded corners=2pt] (2.1, 1.2) rectangle (3.3, 2.0);
    \fill[fill=mlightgreen] (2.1, 1.2) rectangle (3.3, 1.5);
    \fill[fill=mlightblue]  (2.1, 1.2) rectangle (3.3, 1.1);
    \fill[fill=mlightblue,rounded corners=2pt]  (2.1, 1.2) rectangle (3.3, 0.8);
    \draw[rounded corners=2pt] (2.1,0.8) rectangle (3.3, 2.0);
    \draw (2.1, 1.2) -- (3.3, 1.2);
    \tkzputform{2.7, 1.6}{X_v}
    \tkzputform{2.7, 1.0}{X_r}
    % set relations
    \draw[rounded corners=2pt,dotted,fill=mulightgray](3.8, 0)rectangle(7.2, 2);
    \tkzputform{5.5, 1}{
      \begin{array}{l}
        keys( \varsrc ) = \\
        \; \; X_v \suplus \{ \varx \} \suplus X_n \\
        keys( \vardst ) = X_r \suplus X_v \\
        X_r = keys( \vardst )_0 \setminus X_v \\
      \end{array}}
  \end{scope}
\end{tikzpicture}
